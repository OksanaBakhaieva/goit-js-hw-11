{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// document.addEventListener('DOMContentLoaded', () => {\n//     const form = document.querySelector('.form');\n//     const imageList = document.querySelector('.gallery');\n//     const loader = document.createElement('div');\n\n//     const gallery = new SimpleLightbox('.gallery a', {\n//         captionsData: 'alt',\n//         captionDelay: 500,\n//     });\n\n//     form.addEventListener('submit', handleSearch);\n\n//     function handleSearch(event) {\n//         event.preventDefault();\n//         const searchInput = form.elements.input.value;\n//         imageList.innerHTML = '';\n//         if (!searchInput.trim()) {\n//             iziToast.warning({\n//             title: 'Warning',\n//             message: 'Please enter a search query',\n//             messageSize: '20px',\n//             messageColor: '#808080',\n//             backgroundColor: '#e7fc44',\n//             position: 'topLeft',\n//             timeout: 3000,\n//             });\n//         return;\n//         }\n\n//         showLoader();\n\n//         fetchImages(searchInput)\n//             .then(data => {\n//                 if (data.cards.length === 0) {\n//                     iziToast.show({\n//                         message:\n//                             'Sorry, there are no images matching your search query. Please try again!',\n//                         messageSize: '16px',\n//                         messageColor: 'white',\n//                         backgroundColor: '#EF4040',\n//                         position: 'topRight',\n//                         timeout: 5000,\n//                     });\n//                 }\n//                 imageList.innerHTML = createMarkup(data.cards);\n//                 gallery.refresh();\n//             })\n//             .catch(error => {\n//                 console.error('Error fetching data:', error);\n//                 iziToast.error({\n//                     title: 'Error',\n//                     message: 'An error occurred while fetching data. Please try again!',\n//                 });\n//             })\n//             .finally(() => {\n//                 hideLoader();\n//                 form.reset();\n//             });\n//     }\n\n//     function fetchImages(value) {\n//         const BASE_URL = 'https://pixabay.com/api/';\n//         const API_KEY = '41991385-9b19b8bb3d6f1491499417d17';\n                \n//         return fetch(`${BASE_URL}?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`)\n//       .then((resp) => {\n//         if (!resp.ok) {\n//             throw new Error(resp.status);\n//         }\n//             return resp.json();\n//         });\n//     }\n\n//     function createCardsMarkup(cards) {\n//         return cards\n//         .map(\n//             ({\n//                 webformatURL,\n//                 largeImageURL,\n//                 tags,\n//                 likes,\n//                 views,\n//                 comments,\n//                 downloads,\n//             }) =>\n//             `<li class=\"gallery-item\">\n//                 <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//                     <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n//                     <ul class=\"gallery-item-description\">\n//                         <li>Likes: ${likes}</li>\n//                         <li>Views: ${views}</li>\n//                         <li>Downloads: ${downloads}</li>\n//                         <li>Comments: ${comments}</li>\n//                     </ul>\n//                 </a>\n//             </li>`\n//         )\n//         .join('');\n//     }\n \n//     function hideLoader() {\n//     setTimeout(() => {\n//         loader.classList.add('hidden');\n//         }, 1000);\n//     }\n\n//     function showLoader() {\n//         loader.classList.remove('hidden');\n//     }\n// });\n\nconst refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('.input'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  searchBtn: document.querySelector('.button'),\n};\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41991385-9b19b8bb3d6f1491499417d17';\n\nrefs.form.addEventListener('submit', event => {\n  event.preventDefault();\n  const query = refs.form.query.value.trim();\n\n  if (!query) {\n    createMessage(\n      `The search field can't be empty! Please, enter your request!`\n    );\n    return;\n  }\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  fetchImages(url)\n    .then(data => {\n      if (data.hits.length === 0) {\n        createMessage(\n          `Sorry, there are no images matching your search query. Please, try again!`\n        );\n        showLoader(false);\n      }\n\n      refs.gallery.innerHTML = createMarkup(data.hits);\n      showLoader(false);\n      const simplyGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refs.form.reset();\n    })\n    .catch(error => console.error(error));\n});\n\nfunction fetchImages(url) {\n  showLoader(true);\n  return fetch(url).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.ststusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(hits) {\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    <p class=\"gallery-descr\">Likes: <span class=\"descr-span\">${likes}</span> Views: <span class=\"descr-span\">${views}</span> Comments: <span class=\"descr-span\">${comments}</span> Downloads: <span class=\"descr-span\">${downloads}</span></p>\n  </a>\n</li>`\n    )\n    .join('');\n}\n\nfunction createMessage(message) {\n  iziToast.show({\n    class: 'error-svg',\n    position: 'topRight',\n    icon: 'error-svg',\n    message: message,\n    maxWidth: '432',\n    messageColor: '#fff',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n  });\n}\n\nfunction showLoader(state = true) {\n  refs.loader.style.display = !state ? 'none' : 'inline-block';\n  refs.searchBtn.disabled = state;\n}"],"names":["refs","BASE_URL","API_KEY","event","query","createMessage","url","fetchImages","data","showLoader","createMarkup","SimpleLightbox","error","resp","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","iziToast","state"],"mappings":"6vBAoHA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,UAAW,SAAS,cAAc,SAAS,CAC7C,EAEMC,EAAW,2BACXC,EAAU,qCAEhBF,EAAK,KAAK,iBAAiB,SAAUG,GAAS,CAC5CA,EAAM,eAAc,EACpB,MAAMC,EAAQJ,EAAK,KAAK,MAAM,MAAM,OAEpC,GAAI,CAACI,EAAO,CACVC,EACE,8DACN,EACI,MACD,CACD,MAAMC,EAAM,GAAGL,SAAgBC,OAAaE,4DAE5CG,EAAYD,CAAG,EACZ,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,IACvBH,EACE,2EACV,EACQI,EAAW,EAAK,GAGlBT,EAAK,QAAQ,UAAYU,EAAaF,EAAK,IAAI,EAC/CC,EAAW,EAAK,EACM,IAAIE,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GACtB,CAAO,EACDX,EAAK,KAAK,OAChB,CAAK,EACA,MAAMY,GAAS,QAAQ,MAAMA,CAAK,CAAC,CACxC,CAAC,EAED,SAASL,EAAYD,EAAK,CACxB,OAAAG,EAAW,EAAI,EACR,MAAMH,CAAG,EAAE,KAAKO,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASH,EAAaI,EAAM,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,kCAE0BL;AAAA;AAAA;AAAA,aAGrBD;AAAA,aACAE;AAAA;AAAA,+DAEkDC,4CAAgDC,+CAAmDC,gDAAuDC;AAAA;AAAA,MAGpN,EACA,KAAK,EAAE,CACZ,CAEA,SAAShB,EAAciB,EAAS,CAC9BC,EAAS,KAAK,CACZ,MAAO,YACP,SAAU,WACV,KAAM,YACN,QAASD,EACT,SAAU,MACV,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,EAClB,CAAG,CACH,CAEA,SAASb,EAAWe,EAAQ,GAAM,CAChCxB,EAAK,OAAO,MAAM,QAAWwB,EAAiB,eAAT,OACrCxB,EAAK,UAAU,SAAWwB,CAC5B"}